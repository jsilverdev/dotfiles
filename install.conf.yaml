- defaults:
    link:
      create: true
      relink: true

- clean: ['~']

- clean:
    ~/.config:
      recursive: true

- shell:
  - description: Set XDG environmental variables
    command: source ./config/zsh/.zshenv

- link:
    # starship
    ~/.config/starship/:
      glob: true
      path: config/starship/*
      force: true
      create: true
    # zsh
    ~/.config/zsh/:
      if: python -c "import sys; sys.exit(0) if __import__('platform').system() in ['Linux', 'Darwin'] else sys.exit(1)"
      path: config/zsh/**
      glob: true
      force: true
      exclude: [ "config/zsh/.zshenv" ]
    ~/.zshenv:
      if: python -c "import sys; sys.exit(0) if __import__('platform').system() in ['Linux', 'Darwin'] else sys.exit(1)"
      path: config/zsh/.zshenv
      force: true
    # pwsh
    ~/.config/pwsh/:
      if: python -c "import sys; sys.exit(0) if __import__('platform').system() == 'Windows' else sys.exit(1)"
      glob: true
      path: config/pwsh/**
      force: true
      create: true
      exclude: [ "config/pwsh/profile.ps1"]
    ${PROFILE_LOCATION}:
      if: python -c "import sys; sys.exit(0) if __import__('platform').system() == 'Windows' else sys.exit(1)"
      path: config/pwsh/profile.ps1
      force: true
      create: true
    # Git
    ~/:
      glob: true
      path: config/general/.*
      relink: true
      exclude: [ "config/general/.gitignore_global" ]
    ~/.fdignore:
      path: config/general/.gitignore_global
      force: true
      create: true
