- defaults:
    link:
      create: true
      relink: true

- clean: ['~']

- shell:
  -
    command: powershell -Command "$ENV:PROFILE_LOCATION = $profile.CurrentUserAllHosts"
    description: Load PROFILE_LOCATION
    stdin: true
    quiet: true

- link:
    # starship
    ~/.config/starship/:
      glob: true
      path: config/starship/*
      force: true
      create: true
    # profile
    ~/env.ps1:
      path: config/pwsh/env.ps1
      force: true
      create: true
    ${PROFILE_LOCATION}:
      path: config/pwsh/profile.ps1
      force: true
      create: true
    # Git
    ~/:
      glob: true
      path: config/general/.*
      relink: true
      exclude: [ "config/general/.gitignore_global" ]
    ~/.fdignore:
      path: config/general/.gitignore_global
      force: true
      create: true